{"version":3,"sources":["../../../../../../src/javascripts/test/unit/Crud/field/maEmbeddedListFieldSpec.js"],"names":["describe","directive","require","Field","EmbeddedListField","angular","module","restrict","scope","translate","template","value","$compile","directiveUsage","beforeEach","mock","inject","_$compile_","_$rootScope_","it","field","targetFields","num","name","dummy","element","$digest","expect","find","length","toBe","eq","text","trim"],"mappings":";;AAAA;AACAA,SAAS,mCAAT,EAA8C,YAAY;AACtD;;AAEA,QAAIC,YAAYC,QAAQ,qDAAR,CAAhB;AACA,QAAIC,QAAQD,QAAQ,8BAAR,CAAZ;AACA,QAAIE,oBAAoBF,QAAQ,0CAAR,CAAxB;;AAEAG,YAAQC,MAAR,CAAe,2BAAf,EAA4C,EAA5C,EACKL,SADL,CACe,WADf,EAC4B;AAAA,eAAO;AAC3BM,sBAAU,GADiB;AAE3BC,mBAAO,EAAEC,WAAW,GAAb,EAFoB;AAG3BC,sBAAU;AAHiB,SAAP;AAAA,KAD5B,EAMKT,SANL,CAMe,qBANf,EAMsCA,SANtC,EAOKA,SAPL,CAOe,SAPf,EAO0B,YAAW;AAC7B,eAAO;AACHO,mBAAO,EAAEG,OAAO,GAAT,EADJ;AAEHD,sBAAU;AAFP,SAAP;AAIH,KAZL;;AAcA,QAAIE,QAAJ;AAAA,QACIJ,KADJ;AAAA,QAEIK,iBAAiB,qGAFrB;;AAIAC,eAAWT,QAAQU,IAAR,CAAaT,MAAb,CAAoB,2BAApB,CAAX;;AAEAQ,eAAWE,OAAO,UAAUC,UAAV,EAAsBC,YAAtB,EAAoC;AAClDN,mBAAWK,UAAX;AACAT,gBAAQU,YAAR;AACH,KAHU,CAAX;;AAKAC,OAAG,uDAAH,EAA4D,YAAY;AACpEX,cAAMY,KAAN,GAAc,IAAIhB,iBAAJ,CAAsB,OAAtB,EACTiB,YADS,CACI,CAAC,IAAIlB,KAAJ,CAAU,KAAV,CAAD,EAAmB,IAAIA,KAAJ,CAAU,MAAV,CAAnB,CADJ,CAAd;AAEAK,cAAMG,KAAN,GAAc,CAAC,EAAEW,KAAK,CAAP,EAAUC,MAAM,KAAhB,EAAuBC,OAAO,CAA9B,EAAD,EAAoC,EAAEF,KAAK,CAAP,EAAUC,MAAM,KAAhB,EAAuBC,OAAO,CAA9B,EAApC,CAAd;AACA,YAAIC,UAAUb,SAASC,cAAT,EAAyBL,KAAzB,CAAd;AACAA,cAAMkB,OAAN;AACAC,eAAOF,QAAQG,IAAR,CAAa,SAAb,EAAwBC,MAA/B,EAAuCC,IAAvC,CAA4C,CAA5C;AACAH,eAAOF,QAAQG,IAAR,CAAa,OAAb,EAAsBC,MAA7B,EAAqCC,IAArC,CAA0C,CAA1C;AACAH,eAAOF,QAAQG,IAAR,CAAa,GAAb,EAAkBG,EAAlB,CAAqB,CAArB,EAAwBC,IAAxB,GAA+BC,IAA/B,EAAP,EAA8CH,IAA9C,CAAmD,QAAnD;AACAH,eAAOF,QAAQG,IAAR,CAAa,OAAb,EAAsBG,EAAtB,CAAyB,CAAzB,EAA4BvB,KAA5B,GAAoCG,KAA3C,EAAkDmB,IAAlD,CAAuD,CAAvD;AACAH,eAAOF,QAAQG,IAAR,CAAa,OAAb,EAAsBG,EAAtB,CAAyB,CAAzB,EAA4BvB,KAA5B,GAAoCG,KAA3C,EAAkDmB,IAAlD,CAAuD,KAAvD;AACAH,eAAOF,QAAQG,IAAR,CAAa,GAAb,EAAkBG,EAAlB,CAAqB,CAArB,EAAwBC,IAAxB,GAA+BC,IAA/B,EAAP,EAA8CH,IAA9C,CAAmD,QAAnD;AACAH,eAAOF,QAAQG,IAAR,CAAa,OAAb,EAAsBG,EAAtB,CAAyB,CAAzB,EAA4BvB,KAA5B,GAAoCG,KAA3C,EAAkDmB,IAAlD,CAAuD,CAAvD;AACAH,eAAOF,QAAQG,IAAR,CAAa,OAAb,EAAsBG,EAAtB,CAAyB,CAAzB,EAA4BvB,KAA5B,GAAoCG,KAA3C,EAAkDmB,IAAlD,CAAuD,KAAvD;AACAH,eAAOF,QAAQG,IAAR,CAAa,GAAb,EAAkBG,EAAlB,CAAqB,CAArB,EAAwBC,IAAxB,GAA+BC,IAA/B,EAAP,EAA8CH,IAA9C,CAAmD,SAAnD;AACH,KAfD;AAgBH,CAhDD","file":"maEmbeddedListFieldSpec.js","sourcesContent":["/*global angular,inject,describe,it,expect,beforeEach*/\ndescribe('directive: ma-embedded-list-field', function () {\n    'use strict';\n\n    var directive = require('../../../../ng-admin/Crud/field/maEmbeddedListField');\n    var Field = require('admin-config/lib/Field/Field');\n    var EmbeddedListField = require('admin-config/lib/Field/EmbeddedListField');\n\n    angular.module('testapp_EmbeddedListField', [])\n        .directive('translate', () => ({\n            restrict: 'A',\n            scope: { translate: '@' },\n            template: '{{ translate }}'\n        }))\n        .directive('maEmbeddedListField', directive)\n        .directive('maField', function() {\n            return {\n                scope: { value: '=' },\n                template: '<input ng-model=\"value\"></input>'\n            };\n        });\n\n    var $compile,\n        scope,\n        directiveUsage = '<ma-embedded-list-field field=\"field\" value=\"value\" datastore=\"datastore\"></ma-embedded-list-field>';\n\n    beforeEach(angular.mock.module('testapp_EmbeddedListField'));\n\n    beforeEach(inject(function (_$compile_, _$rootScope_) {\n        $compile = _$compile_;\n        scope = _$rootScope_;\n    }));\n\n    it('should contain a list of subforms with bounded inputs', function () {\n        scope.field = new EmbeddedListField('dummy')\n            .targetFields([new Field('num'), new Field('name')]);\n        scope.value = [{ num: 1, name: 'foo', dummy: 0 }, { num: 2, name: 'bar', dummy: 1 }];\n        var element = $compile(directiveUsage)(scope);\n        scope.$digest();\n        expect(element.find('ng-form').length).toBe(2);\n        expect(element.find('input').length).toBe(4);\n        expect(element.find('a').eq(0).text().trim()).toBe('REMOVE');\n        expect(element.find('input').eq(0).scope().value).toBe(1);\n        expect(element.find('input').eq(1).scope().value).toBe('foo');\n        expect(element.find('a').eq(1).text().trim()).toBe('REMOVE');\n        expect(element.find('input').eq(2).scope().value).toBe(2);\n        expect(element.find('input').eq(3).scope().value).toBe('bar');\n        expect(element.find('a').eq(2).text().trim()).toBe('ADD_NEW');\n    });\n});\n"]}